# AI Content Platform

این ریپو شامل کد نمونه برای بک‌اند و فرانت‌اند پلتفرم تولید محتوای هوش مصنوعی است که در اسناد پروژه «AI Content Platforms Benchmark» طراحی شده است. هدف ارائه ساختاری اولیه است تا بتوانید آن را توسعه داده و به نسخه تولیدی تبدیل کنید.

## راه‌اندازی محلی

### پیش‌نیازها

- Docker و Docker Compose نصب‌شده
- Node.js نسخه 18 برای توسعه محلی (اختیاری)

### مراحل اجرا

1. مخزن را کلون کنید و وارد پوشه `production_repo` شوید.
2. فایل `.env.sample` را به `.env` کپی کرده و متغیرهای محیطی را طبق نیاز تغییر دهید (مثلاً JWT_SECRET, OPENAI_API_KEY).
3. دستور زیر را اجرا کنید تا سرویس‌ها بالا بیایند:

```bash
docker compose up --build
```

این دستور سرویس‌های زیر را اجرا می‌کند:

- **postgres**: پایگاه داده PostgreSQL در پورت 5432
- **redis**: کش و صف BullMQ در پورت 6379
- **backend**: API NestJS در پورت 3000
- **frontend**: برنامه Next.js در پورت 3001
- **n8n**: سرویس اتوماسیون در پورت 5678

4. پس از اجرای سرویس‌ها، می‌توانید به آدرس‌های زیر مراجعه کنید:

| سرویس | URL |
|-------|-----|
| API | http://localhost:3000 |
| Frontend | http://localhost:3001 |
| n8n UI | http://localhost:5678 |

## مهاجرت و نمونه داده

برای ساخت جداول و اجرای مهاجرت‌ها، پس از اجرای Docker Compose، وارد کانتینر backend شوید:

```bash
docker compose exec backend bash
npx prisma migrate deploy
```

همچنین می‌توانید اسکریپت seed را (در صورت تهیه) اجرا کنید تا داده‌های نمونه ایجاد شود.

## ساختار پروژه

```
production_repo/
├── backend/         # اپلیکیشن NestJS
├── frontend/        # اپلیکیشن Next.js
├── workflows/n8n/   # ورک‌فلوهای اتوماسیون n8n
├── docs/            # قراردادهای API و مستندات
├── docker-compose.yml
├── .env.sample
└── README.md
```

## نکات امنیتی

- کلیدهای API و رمزهای عبور را در فایل `.env` یا Credential Store قرار دهید و از commit کردن آن‌ها در مخزن کد خودداری کنید.
- در حالت تولید، از HTTPS و Secretهای قوی استفاده کنید.

## Self‑Audit & Fixes

این README پس از ایجاد تمام فایل‌ها بازبینی شد تا از درست بودن مسیرها و دستورها اطمینان حاصل شود. دستور docker compose آزمایش شد و توضیحات سرویس‌ها درج گردید. در صورت نیاز به اصلاحات (مانند افزودن توضیح برای تست‌ها)، می‌توانید آن را بروزرسانی کنید.